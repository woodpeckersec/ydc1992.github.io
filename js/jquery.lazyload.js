!function(e,n){"function"==typeof define&&define.amd?define(["jquery"],n):n(e.jQuery)}(this,function(e){e.fn.lazyload=function(n){return this.each(function(){n=n||{};var i=e.extend({},{},n),t=e(this),o=n.srcSign||"lazy-src",a=n.errCallBack||function(){},r=n.container||e(window),c=function(e,i,t){if(!e.attr("src"))if(1==n.cache){console.log(e);var o,a=document.getElementById("canvas1").getContext("2d");image=new Image,image.src=e.attr(i),image.onload=function(){a.drawImage(image,0,0),o=a.getImageData(0,0,500,250),console.log(o)}}else{!function(e){e.width(),e.height(),e.offset().top,e.offset().left;e.clone().addClass("lazy-loding").insertBefore(e)[0].src=yiliaConfig.rootUrl+"img/img-loading.png",e.hide()}(e);var r=e.attr(i);e[0].onerror=function(n){!function(e,n,i,t){n[0].src&&(n[0].src.indexOf("img-err.png")>0||n[0].src.indexOf("img-err2.png")>0)||(n.width(),n.height(),n[0].src=yiliaConfig.rootUrl+"img/img-err.png",i())}(0,e,t)},e[0].onload=function(n){e.parent().find(".lazy-loding").remove(),e.show()},e[0].src=r}};if(i.cache=[],"IMG"==this.tagName){var g={obj:t,tag:"img",url:t.attr(o)};i.cache.push(g)}else{var f=t.find("img");f.each(function(n){var t=this.nodeName.toLowerCase(),a=e(this).attr(o),r={obj:f.eq(n),tag:t,url:a};i.cache.push(r)})}var l=function(){var n,t=r.height();n=e(window).get(0)===window?e(window).scrollTop():r.offset().top,e.each(i.cache,function(e,i){var r,g=i.obj,f=i.tag,l=i.url;g&&(r=g.offset().top-n,g.height(),r>=0&&r<t&&(l&&"img"===f&&c(g,o,a),i.obj=null))})};l(),r.bind("scroll",l),r.bind("resize",l)})}});