window._bd_share_main.F.module("component/pop_popup",function(e,o){var t,i,n,a,p=e("base/tangram").T,s=e("base/class").Class,r=(e("conf/const"),e("component/pop_base")),d=s.create(function(){var e=this;e._poptype=1,e._hide=function(){n&&n.hide(),i&&i.hide()},e._show=function(o,t){!function(o,t){var s=t.bdMini||2,r=t.bdMiniList||e._partnerSort.slice(0,8*s),d=[];p.each(r,function(o,t){d[o]='<li><a href="#" onclick="return false;" class="popup_'+t+'" data-cmd="'+t+'">'+e._partners[t].name+"</a></li>"}),a.html(d.join("")),i.width(110*s+6),n.height(i.outerHeight()),n.width(i.outerWidth())}(e._container,t);var s=e._getPosition(o.element,t);p.each([i,n],function(e,o){o.css({top:s.top,left:s.left}).show()}),p(o.element).one("mouseout",function(){var o=!1;i.one("mouseover",function(){o=!0}),setTimeout(function(){!o&&e.hide()},300)})},e._getPosition=function(e,o){var t=p(e).offset(),n=t.top+p(e).height()+5,a=t.left,s=i.outerHeight(),r=p(window).scrollTop();(n+s>p("body").height()&&n+s>p(window).height()||n+s>r+p(window).height())&&(n=(n=t.top-s-5)<r?r:n);var d=o.bdPopupOffsetLeft,u=o.bdPopupOffsetTop;return(d||u)&&(n+=0|u,a+=0|d),{top:n,left:a}},e._init=function(){var o="bdSharePopup_"+ +new Date,t=['<iframe frameborder="0" id="'+o+'bg" class="bdshare_popup_bg" style="display:none;"></iframe>'].join(""),s=['<div class="bdshare_popup_box" id="'+o+'box" style="display:none;">','<div class="bdshare_popup_top">',"分享到","</div>",'<ul class="bdshare_popup_list"></ul>','<div class="bdshare_popup_bottom">','<a href="#" onclick="return false;" class="popup_more"  data-cmd="more" target="_blank;">更多...</a>',"</div>","</div>"].join("");p("body").insertHTML("beforeEnd",t+s),e._container=i=p("#"+o+"box"),a=i.find(".bdshare_popup_list"),n=p("#"+o+"bg"),i.mouseleave(e.hide)}},r.PopBase);o.Popup=(t||(t=new d).init(),t)});